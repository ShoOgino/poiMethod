    public void test_schemaFilesRegeneration_02() throws Exception {
        // incremental compile with the changes. Specific files should be regenerated
        XmlObject obj1 = XmlObject.Factory.parse(schemaFilesRegeneration_schema1);
        XmlObject obj2 = XmlObject.Factory.parse(schemaFilesRegeneration_schema1_modified);

        XmlObject[] schemas = new XmlObject[]{obj1};
        XmlObject[] schemas2 = new XmlObject[]{obj2};

        // the source name should be set the same for incremental compile
        schemas[0].documentProperties().setSourceName("obj1");
        schemas2[0].documentProperties().setSourceName("obj1");

        // create a new filer here with the incrCompile flag value set to 'true'
        Filer filer = new FilerImpl(out, out, null, true, true);
        SchemaTypeSystem base = XmlBeans.compileXmlBeans("test",null,schemas,null,builtin,filer,xm);
        Assert.assertNotNull("Compilation failed during Incremental Compile.", base);
        base.saveToDirectory(out);

        // get timestamps for first compile
        HashMap initialTimeStamps = new HashMap();
        recordTimeStamps(out, initialTimeStamps);

        // the incr compile
        HashMap recompileTimeStamps = new HashMap();
        Filer filer2 = new FilerImpl(out, out, null, true, true);
        SchemaTypeSystem incr = XmlBeans.compileXmlBeans("test",base,schemas2,null,builtin,filer2,xm);
        Assert.assertNotNull("Compilation failed during Incremental Compile.", incr);
        incr.saveToDirectory(out);
        recordTimeStamps(out, recompileTimeStamps);

        // compare generated source timestamps here
        assertEquals("Number of Files not equal for Incremental Schema Compilation using Filer",initialTimeStamps.size(), recompileTimeStamps.size());
        Set keyset = initialTimeStamps.keySet();

        // Atype has been modified, BType has been removed
        String modifiedFileName = out.getCanonicalFile() + "\\org\\openuri\\impl\\ATypeImpl.java";
        String modifiedFileName2 = out.getCanonicalFile() + "\\org\\openuri\\AType.java";

        for (Iterator iterator = keyset.iterator(); iterator.hasNext();) {
            String eachFile = (String) iterator.next();

            if(eachFile.equalsIgnoreCase(modifiedFileName)){
                assertNotSame("File Should have been regenerated by Filer but has the same timestamp",initialTimeStamps.get(eachFile),recompileTimeStamps.get(eachFile));
                continue;
            }
            if(eachFile.equalsIgnoreCase(modifiedFileName2)){
                assertNotSame("File Should have been regenerated by Filer but has the same timestamp",initialTimeStamps.get(eachFile),recompileTimeStamps.get(eachFile));
                continue;
            }
            assertEquals("Mismatch for File " + eachFile,initialTimeStamps.get(eachFile),recompileTimeStamps.get(eachFile));
        }

        handleErrors(errors);
    }

