    public static void deltree(File dir)
        throws InterruptedException
    {
        if (dir.exists())
        {
            if (dir.isDirectory())
            {
                String[] list = dir.list();
                for (int i = 0; i < list.length; i++)
                    deltree(new File(dir, list[i]));
            }
            if (!dir.delete())
            {
                for (int i=0; i<5; i++)
                {
                    try
                    {
                        System.out.println("Sleep 1s and try do delete it again: " + dir.getCanonicalPath());
                    }
                    catch (IOException e)
                    {
                        e.printStackTrace(System.out);
                    }
                    Thread.currentThread().sleep(1000);
                    if (dir.delete())
                        return;
                }

                if (!dir.delete())
                    throw new IllegalStateException("Could not delete " + dir);
            }
        }
    }

