    private XmlObject findObject() {
        XmlCursor c = getCursor();
        c.push();

        while (!(c.isContainer() || c.isAttr()))
            if (c.toNextToken().isNone())
                break;

        if (!c.isEnddoc()) {
            XmlObject x = c.getObject();
            c.pop();
            if (x == null)
                throw new IllegalStateException(
                        "getObject returned null - content must have changed");
            return x;
        }

        c.pop();
        c.push();

        while (!(c.isContainer() || c.isAttr()))
            if (c.toPrevToken().isNone())
                break;

        XmlObject x = c.getObject();
        c.pop();
        if (x == null)
            throw new IllegalStateException(
                    "getObject returned null - content must have changed");
        return x;
    }

