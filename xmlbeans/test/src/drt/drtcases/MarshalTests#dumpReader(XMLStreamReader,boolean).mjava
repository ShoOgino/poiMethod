    private static void dumpReader(final XMLStreamReader reader, boolean verbose)
        throws XMLStreamException, XmlException, IOException
    {
        final boolean write_doc = true;
        if (write_doc) {
            StringWriter sw = new StringWriter();

            XMLStreamWriter xsw =
                XMLOutputFactory.newInstance().createXMLStreamWriter(sw);


            XmlReaderToWriter.writeAll(reader, xsw);

            xsw.close();

            if (verbose) {
                final String xmldoc = sw.getBuffer().toString();
                inform("DOC:", verbose);
                inform(PrettyPrinter.indent(xmldoc), verbose);
            }
        } else {
            int i = 0;
            if (verbose)
                inform((i++) + "\tSTATE: " +
                       XmlStreamUtils.printEvent(reader), verbose);
            while (reader.hasNext()) {
                final int state = reader.next();
                if (verbose)
                    inform((i++) + "\tSTATE: " +
                           XmlStreamUtils.printEvent(reader), verbose);
            }
        }
    }

