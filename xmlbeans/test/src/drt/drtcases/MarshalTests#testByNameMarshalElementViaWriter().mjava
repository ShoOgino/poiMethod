    public void testByNameMarshalElementViaWriter()
        throws Exception
    {
        com.mytest.MyClass mc = new com.mytest.MyClass();
        mc.setMyatt("attval");
        com.mytest.YourClass myelt = new com.mytest.YourClass();
        myelt.setAttrib(99999.777f);
        myelt.setMyFloat(5555.4444f);
//        myelt.setMyClass(new com.mytest.MyClass());
//        myelt.setMyClass(new com.mytest.MySubSubClass());
        mc.setMyelt(myelt);

        myelt.setStringArray(new String[]{"one", "two", "three"});


        BindingContext bindingContext = getBindingContext(getBindingConfigDocument());

        StringWriter sw = new StringWriter();
        XMLStreamWriter w = XMLOutputFactory.newInstance().createXMLStreamWriter(sw);

        final XmlOptions options = new XmlOptions();
        Collection errors = new LinkedList();
        options.setErrorListener(errors);
        Marshaller ctx =
            bindingContext.createMarshaller();
        Assert.assertNotNull(ctx);

        final QName elem_name = DFLT_ELEM_NAME;
        ctx.marshalElement(w,
                           mc,
                           elem_name,
                           mc.getClass().getName(),
                           options);

        //now unmarshall from String and compare objects...
        StringReader sr = new StringReader(sw.getBuffer().toString());
        XMLStreamReader rdr =
            XMLInputFactory.newInstance().createXMLStreamReader(sr);
        Unmarshaller umctx = bindingContext.createUnmarshaller();
        while (!rdr.isStartElement()) {
            rdr.next();
        }
        Object out_obj = umctx.unmarshalElement(rdr, elem_name,
                                                mc.getClass().getName(),
                                                options);
        reportErrors(errors, "marsh-elem");
        Assert.assertEquals(mc, out_obj);
        Assert.assertTrue(errors.isEmpty());
    }

