    /**
     *
     */
    public void testAddNewDetail() throws Exception {
        Fault fault = Fault.Factory.newInstance();

        fault.setFaultcode(new QName(soapenv, "foo"));
        fault.setFaultstring("Undefined");
        fault.addNewDetail().set(
                XmlObject.Factory.parse("<foo/>").changeType(Detail.type));

        String expect = "<xml-fragment>" +
                "<faultcode xmlns:soapenv=\"" + soapenv + "\">soapenv:foo</faultcode>" +
                "<faultstring>Undefined</faultstring>" +
                "<detail><foo/></detail>" +
                "</xml-fragment>";
        assertEquals(expect, fault.xmlText());
        assertEquals(new QName(soapenv, "foo"), fault.getFaultcode());
        assertEquals("Undefined", fault.getFaultstring());
        assertEquals("<foo/>", fault.getDetail().xmlText());
    }

