    //tests for preserving/copying namespace declarations when doing an XmlObject.set()
    public void testDroppedXsdNSDecl() throws Exception
    {
        // Test for XSD namespace declaration dropped
        EnvelopeDocument env1 = EnvelopeDocument.Factory.parse("<soap:Envelope \n" +
                "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n" +
                "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \n" +
                "xmlns:tns=\"http://Walkthrough/XmlWebServices/\" \n" +
                "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n" +
                "  <soap:Body>\n" +
                "    <tns:ConvertTemperature>\n" +
                "      <dFahrenheit xsi:type=\"xsd:double\">88</dFahrenheit>\n" +
                "    </tns:ConvertTemperature>\n" +
                "  </soap:Body>\n" +
                "</soap:Envelope>");

        EnvelopeDocument env2 = EnvelopeDocument.Factory.newInstance();
        env2.addNewEnvelope().setBody(env1.getEnvelope().getBody());

        // compare the 2 body elements using the Xml Comparator. This uses a cursor to walk thro the docs and compare elements and attributes
        tools.xml.XmlComparator.Diagnostic diag = new tools.xml.XmlComparator.Diagnostic();
        assertTrue(XmlComparator.lenientlyCompareTwoXmlStrings(env1.getEnvelope().getBody().xmlText(), env2.getEnvelope().getBody().xmlText(), diag));

        // navigate to the dFahrenhiet element and check for the XSD namespace
        XmlCursor env2Cursor = env2.newCursor();
        assertTrue(env2Cursor.toFirstChild());      // <Envelope>
        assertTrue(env2Cursor.toFirstChild());      // <Body>
        assertTrue(env2Cursor.toFirstChild());      // <ConvertTemperature>
        if (env2Cursor.toFirstChild())               // <dFahrenheit>
        {
            assertTrue("Element name mismatch!", env2Cursor.getName().equals(new QName("","dFahrenheit")));
            assertEquals("Element val mismatch!", "88", env2Cursor.getTextValue());
            assertEquals("XSD Namespace has been dropped", "http://www.w3.org/2001/XMLSchema", env2Cursor.namespaceForPrefix("xsd"));
        }

    }

