    public void testValidSubstBuild() throws Throwable {
        ItemsDocument doc = ItemsDocument.Factory.newInstance();
        ItemType items = doc.addNewItems();
        BusinessShirtType bShirt = BusinessShirtType.Factory.newInstance();
        bShirt.setName("Funny Shirt");
        bShirt.setNumber("SKU84");
        bShirt.setSize(new BigInteger("10"));
        bShirt.setColor("blue");

        BeachUmbrellaT bu = BeachUmbrellaT.Factory.newInstance();
        bu.setName("Beach umbrella");
        bu.setNumber("SKU-BU");
        bu.setDiameter(1.4f);

        ProductType genericProd = ProductType.Factory.newInstance();
        genericProd.setName("Pants");
        genericProd.setNumber("32");
        items.setProductArray(new ProductType[]{bShirt, bu, genericProd});
        //shirt must be white
        assertTrue(!doc.validate(validateOptions));
        String[] errExpected = new String[]{
            XmlErrorCodes.DATATYPE_VALID$PATTERN_VALID
        };
        assertTrue(compareErrorCodes(errExpected));


        //TODO: is the object being copied? Should this change the color?
        bShirt.setColor("white");
        items.setProductArray(0,bShirt);

        try {
            assertTrue(doc.validate(validateOptions));
        } catch (Throwable t) {
            showErrors();
            throw t;
        }
    }

