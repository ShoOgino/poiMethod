    public void testLengthFacet() throws Throwable {
        LengthEltDocument doc = LengthEltDocument.Factory.newInstance();
        List vals = new ArrayList();
        vals.add("lstsmall");

        doc.setLengthElt(vals);
        //this should be too short
        assertTrue(!doc.validate(validateOptions));
        showErrors();
        String[] errExpected = new String[]{
            XmlErrorCodes.DATATYPE_LENGTH_VALID$LIST_LENGTH};
        assertTrue(compareErrorCodes(errExpected));

        vals.add("lstsmall");
        doc.setLengthElt(vals);
        try {
            assertTrue(doc.validate(validateOptions));
        } catch (Throwable t) {
            showErrors();
            throw t;
        }
        //this should be too long
        vals.add("lstsmall");
        doc.setLengthElt(vals);
        clearErrors();
        assertTrue(!doc.validate(validateOptions));
        showErrors();
        errExpected = new String[]{
            XmlErrorCodes.DATATYPE_LENGTH_VALID$LIST_LENGTH
        };
        assertTrue(compareErrorCodes(errExpected));

    }

