    public void testNotNillableGlobalElem() {
        XmlOptions options = new XmlOptions();
        options.setValidateOnSet();

        // global element, not nillable. If setXXX is set to null & validateOnSet is true, it should throw XmlValueNotNillableException
        CityNameDocument cityName = CityNameDocument.Factory.newInstance(options);
        try{
            cityName.setCityName(null);
            fail("XmlValueNotNillableException Expected here");
        }
        catch (XmlValueNotNillableException e) {
        }

        // with validate turned off, this should to thro
        CityNameDocument cityNameWithValidateOff = CityNameDocument.Factory.newInstance();
        try{
            cityNameWithValidateOff.setCityName(null);
        }
        catch (XmlValueNotNillableException e) {
            e.printStackTrace();
            fail("XmlValueNotNillableException NOT Expected here");
        }

        assertEquals("<nil:cityName " +
               "xsi:nil=\"true\" " +
               "xmlns:nil=\"http://xbean/scomp/element/NillTest\" " +
               "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"/>",
               cityNameWithValidateOff.xmlText());
    }

