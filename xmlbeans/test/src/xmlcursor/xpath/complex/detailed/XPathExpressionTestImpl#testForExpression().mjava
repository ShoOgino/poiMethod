    public void testForExpression()
        throws Exception
    {
        String sXml = "<bib>\n" +
            "  <book>\n" +
            "    <title>TCP/IP Illustrated</title>\n" +
            "    <author>Stevens</author>\n" +
            "    <publisher>Addison-Wesley</publisher>\n" +
            "  </book>\n" +
            "  <book>\n" +
            "    <title>Advanced Programming in the Unix environment</title>\n" +
            "    <author>Stevens</author>\n" +
            "    <publisher>Addison-Wesley</publisher>\n" +
            "  </book>\n" +
            "  <book>\n" +
            "    <title>Data on the Web</title>\n" +
            "    <author>Abiteboul</author>\n" +
            "    <author>Buneman</author>\n" +
            "    <author>Suciu</author>\n" +
            "  </book>\n" +
            "</bib>";

        String query = "for $a in distinct-values(//author) " +
            "return ($a," +
            "        for $b in //book[author = $a]" +
            "        return $b/title)";
        String[] exp = new String[] {
            "<xml-fragment>Stevens</xml-fragment>",
            "<title>TCP/IP Illustrated</title>",
            "<title>Advanced Programming in the Unix environment</title>",
            "<xml-fragment>Abiteboul</xml-fragment>",
            "<title>Data on the Web</title>",
            "<xml-fragment>Buneman</xml-fragment>",
            "<title>Data on the Web</title>",
            "<xml-fragment>Suciu</xml-fragment>",
            "<title>Data on the Web</title>"
            };
        XmlCursor c = XmlObject.Factory.parse(sXml).newCursor();
        c.selectPath(query);
        verifySelection(c, exp);
    }

