    public void testIf()
        throws Exception
    {
        XmlCursor c = XmlObject.Factory.parse("<root>" +
            "<book price='20'>Pooh</book>" +
            "<cd price='25'>Pooh</cd>" +
            "<book price='50'>Maid</book>" +
            "<cd price='25'>Maid</cd>" +
            "</root>").newCursor();
        String query = "if (//book[1]/@price) " +
            "  then //book[1] " +
            "  else 0";
        c.selectPath(query);
        assertEquals(1, c.getSelectionCount());
        c.toNextSelection();
        assertEquals("<book price=\"20\">Pooh</book>", c.xmlText());

        query = "for $b1 in //book, $b2 in //cd " +
            "return " +
            "if ( $b1/@price < $b2/@price )" +
            " then $b1" +
            " else $b2";
        c.selectPath(query);
        assertEquals(4, c.getSelectionCount());
        c.toNextSelection();
        assertEquals("<book price=\"20\">Pooh</book>", c.xmlText());
        c.toNextSelection();
        assertEquals("<book price=\"20\">Pooh</book>", c.xmlText());
        c.toNextSelection();
        assertEquals("<cd price=\"25\">Pooh</cd>", c.xmlText());
        c.toNextSelection();
        assertEquals("<cd price=\"25\">Maid</cd>", c.xmlText());
    }

