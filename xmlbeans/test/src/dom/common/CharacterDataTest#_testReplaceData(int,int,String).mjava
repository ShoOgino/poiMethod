    private void _testReplaceData(int offset, int count, String newStr) {
        String sData = ((CharacterData) m_node).getData();
        int nDataLen = sData.length();
        if (offset < 0 || offset > nDataLen || count < 0)
            try {
                ((CharacterData) m_node).replaceData(offset, count, newStr);
                fail("Deleting OOB chars");
            } catch (DOMException de) {
                assertEquals(de.code, DOMException.INDEX_SIZE_ERR);
            }
        else {
            ((CharacterData) m_node).replaceData(offset, count, newStr);
            if (count == 0)
                assertEquals(sData, ((CharacterData) m_node).getData());
            else if (newStr == null)
                assertEquals("", ((CharacterData) m_node).getData());
            else if (offset + count == nDataLen || (offset + count) > nDataLen) {
                String sOld = sData.substring(0, offset);
                assertEquals(sOld + newStr, ((CharacterData) m_node).getData());

            } else if (offset == 0)
                assertEquals(sData.substring(count, sData.length() - count) + newStr, ((CharacterData) m_node).getData());
            else
                assertEquals(sData.substring(0, offset) + newStr + sData.substring(offset + count),
                             ((CharacterData) m_node).getData());
        }

    }

