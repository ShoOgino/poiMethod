    public void testSetAttributeNode() {
        Attr result;
        Attr newAttr = m_doc.createAttribute("attr0");
        Attr oldAttr = ((Element) m_node).getAttributeNode("attr0");
        newAttr.setValue("newval");
        result = ((Element) m_node).setAttributeNode(newAttr);
        assertEquals(oldAttr, result);
        assertEquals("newval",
                ((Element) m_node).getAttributeNode("attr0").getNodeValue());

        //insert self
        try {
            Attr at0 = ((Element) m_node).getAttributeNode("attr0");
            String v1 = at0.getNodeValue();
            ((Element) m_node).setAttributeNode(at0);
            assertEquals(v1, ((Element) m_node).getAttribute("attr0"));
        }
        catch (DOMException de) {
            assertEquals(de.code, DOMException.INUSE_ATTRIBUTE_ERR);
        }

        //insert new
        newAttr = m_doc.createAttribute("attr1");
        newAttr.setValue("newval");
        result = ((Element) m_node).setAttributeNode(newAttr);
        assertEquals(null, result);
        assertEquals("newval",
                ((Element) m_node).getAttributeNode("attr1").getNodeValue());
        assertEquals(2, m_node.getAttributes().getLength());
    }

