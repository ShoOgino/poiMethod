    /*
    * [XMLBEANS-184]: NPE when running scomp without nopvr option
    *
    */
    public void test_jira_xmlbeans184() throws Exception {
        List errors = new ArrayList();

        // compile with nopvr, goes thro fine
        SchemaCompiler.Parameters params = new SchemaCompiler.Parameters();
        params.setXsdFiles(new File[]{new File(scompTestFilesRoot + "xmlbeans_184_vdx_data_V1.04.xsd_")});
        params.setErrorListener(errors);
        params.setSrcDir(schemaCompSrcDir);
        params.setClassesDir(schemaCompClassesDir);
        params.setNoPvr(true);

        try {
            SchemaCompiler.compile(params);
        } catch (NullPointerException npe) {
            npe.printStackTrace();
            fail("NPE when executing scomp");
        }

        if (printOptionErrMsgs(errors)) {
            Assert.fail("test_jira_xmlbeans184() : Errors found when executing scomp");
        }

        // now compile without the pvr option and NPE is thrown
        params.setNoPvr(false);
        try {
            SchemaCompiler.compile(params);
        } catch (NullPointerException npe) {
            npe.printStackTrace();
            fail("NPE when executing scomp");
        }

        if (printOptionErrMsgs(errors)) {
            Assert.fail("test_jira_xmlbeans184() : Errors found when executing scomp ");
        }

    }

