    public void testCodes() throws Exception
    {
        // throws Exception if a duplicate error code value is found.
        Set codes = readCodes();

        // throws Exception if a duplicate message property key is found.
        Properties messages = readMessages();

        // each message key should have an error code value
        Enumeration e = messages.keys();
        while (e.hasMoreElements()) {
            String key = (String) e.nextElement();

            // these properties are known not to have an error code
            if (key.equals("message.missing.resource") || key.equals("message.pattern.invalid"))
                continue;

            if (!codes.contains(key))
                throw new Exception("message.properties key '" + key + "' has no error code.");
        }

        // each error code value should have a message key
        Iterator iter = codes.iterator();
        while (iter.hasNext()) {
            String code = (String) iter.next();
            if (messages.get(code) == null)
                throw new Exception("missing message.properties key for error code: " + code);
        }

    }

