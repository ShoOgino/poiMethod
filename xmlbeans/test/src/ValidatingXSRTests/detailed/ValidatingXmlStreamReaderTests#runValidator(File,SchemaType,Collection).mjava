    private boolean runValidator(File xml,
                                 SchemaType type,
                                 Collection errors)
            throws IllegalArgumentException, Exception
    {
        if (errors == null)
            throw new IllegalArgumentException(
                    "Collection object cannot be null");

        XMLStreamReader xsr = XMLInputFactory.newInstance().
                              createXMLStreamReader(new FileInputStream(xml));

        ValidatingXMLStreamReader valXsr = new ValidatingXMLStreamReader();
        valXsr.init(xsr,
                    false,
                    type,
                    XmlBeans.typeLoaderForClassLoader(ValidatingXMLStreamReader.class.getClassLoader()),
                    null,
                    errors);

        // Walk through the xml
        while (valXsr.hasNext())
            valXsr.next();

        return valXsr.isValid();
        //return true;
    }

