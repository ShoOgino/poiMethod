    public void testNewDomNodeWithOptions() throws Exception {
        m_xo = XmlObject.Factory.parse("<foo attr=\"val\" xmlns=\"ns\">01234   <bar>text</bar>   chars </foo>");
        XmlOptions map = new XmlOptions();
        map.put(XmlOptions.LOAD_STRIP_WHITESPACE, "");
        map.put(XmlOptions.LOAD_REPLACE_DOCUMENT_ELEMENT, "");
        map.put(XmlOptions.SAVE_NAMESPACES_FIRST, "");
        Node doc = m_xo.newDomNode(map);
        assertEquals(DOC, doc.getNodeName());
        NodeList nl = doc.getChildNodes();
        assertEquals(1, nl.getLength());
        Node node = nl.item(0);
        assertEquals(Node.ELEMENT_NODE, node.getNodeType());
        assertEquals("foo", node.getLocalName());
        nl = node.getChildNodes();
        assertEquals(3, nl.getLength());
        node = nl.item(0);
        assertEquals(Node.TEXT_NODE, node.getNodeType());
        assertEquals("01234   ", node.getNodeValue());
        node = nl.item(1);
        assertEquals(Node.ELEMENT_NODE, node.getNodeType());
        assertEquals("bar", node.getLocalName());
        node = nl.item(2);
        assertEquals(Node.TEXT_NODE, node.getNodeType());
        assertEquals("   chars ", node.getNodeValue());
        // dive into bar
        nl = nl.item(1).getChildNodes();
        assertEquals(1, nl.getLength());
        node = nl.item(0);
        assertEquals(Node.TEXT_NODE, node.getNodeType());
        assertEquals("text", node.getNodeValue());
    }

