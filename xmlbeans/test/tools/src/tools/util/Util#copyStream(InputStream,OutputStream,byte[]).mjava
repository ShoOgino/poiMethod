    /**
     * Copy from an output stream to an input stream.
     */

    static public int
            copyStream(InputStream in, OutputStream out, byte[] buffer)
            throws IOException
    {
        int c;
        int length = 0;

        if (buffer == null)
            buffer = new byte[4096];

        while ((c = in.read(buffer)) > 0)
        {
            length += c;
            out.write(buffer, 0, c);
        }

        return length;
    }

