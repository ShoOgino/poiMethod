    /**
     * Helper for the {@link #getFilteredStackTrace(java.lang.Throwable)}
     * method.
     *
     * @param line    A single line from the stack trace.
     * @param filters Set of custom filters where each filter is
     *                the beginning of a class name.
     * @return true if the line should be filtered; false otherwise.
     */
    static boolean isFiltered(String line, String[] filters)
    {
        final String[] defaultFilters = new String[]{
            "org.apache.xmlbeansbeans.test.tools.moosehead",
            "org.apache.xmlbeansbeans.test.tools.harness.Main",
            "junit.framework.TestCase",
            "junit.framework.TestResult",
            "junit.framework.TestSuite",
            "junit.framework.Assert.", // don't filter AssertException
            "java.lang.reflect.Method.invoke(",
            "org.apache.tools.ant"
        };

        for (int i = 0; i < defaultFilters.length; ++i)
        {
            if (line.indexOf(defaultFilters[i]) > 0)
            {
                return true;
            }
        }

        if (filters != null)
            for (int i = 0; i < filters.length; ++i)
            {
                if (line.indexOf(filters[i]) > 0)
                    return true;
            }

        return false;
    }

