    /**
     * printout - Prints summary to stdout.
     * Expects all data structures have been filled out.
     */
    String printout()
    {
        printstatus = idle;
        anyprinted = false;
        PrintStream _sysout = System.out;
        _sysout.flush();
        String ret;
        try
        {
            ByteArrayOutputStream bout = new ByteArrayOutputStream();
            System.setOut(new PrintStream(bout));
            for (printoldline = printnewline = 1; ;)
            {
                if (printoldline > oldinfo.maxLine)
                {
                    newconsume();
                    break;
                }
                if (printnewline > newinfo.maxLine)
                {
                    oldconsume();
                    break;
                }
                if (newinfo.other[printnewline] < 0)
                {
                    if (oldinfo.other[printoldline] < 0)
                        showchange();
                    else
                        showinsert();
                } else if (oldinfo.other[printoldline] < 0)
                    showdelete();
                else if (blocklen[printoldline] < 0)
                    skipold();
                else if (oldinfo.other[printoldline] == printnewline)
                    showsame();
                else
                    showmove();
            }

            if (anyprinted)
                ret = bout.toString();
            else
                ret = null;
        }
        finally
        {
            System.setOut(_sysout);
        }

        return ret;
    }

