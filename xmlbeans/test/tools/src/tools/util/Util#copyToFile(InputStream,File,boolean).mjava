    /**
     * Copy a stream to a file.
     */
    public static void copyToFile(InputStream in, File toFile,
                                  boolean overwrite)
            throws IOException
    {
        if (toFile.exists() && !overwrite)
            return;

        // create any parent directories
        File parent = toFile.getParentFile();
        if (parent != null)
            parent.mkdirs();

        // creates a new file only if it doesn't exist
        toFile.createNewFile();

        copy(in, new FileOutputStream(toFile));
    }

