    public CommandLine(String[] args, Collection flags, Collection scheme)
    {
        if (flags == null || scheme == null)
            throw new IllegalArgumentException("collection required (use Collections.EMPTY_SET if no options)");

        _options = new LinkedHashMap();
        ArrayList badopts = new ArrayList();
        ArrayList endargs = new ArrayList();

        for (int i = 0; i < args.length; i++)
        {
            if (args[i].indexOf('-') == 0)
            {
                String opt = args[i].substring(1);
                String val = null;

                if (flags.contains(opt))
                    val = "";
                else if (scheme.contains(opt))
                {
                    if (i+1 < args.length)
                        val = args[++i];
                    else
                        val = "";
                }
                else
                    badopts.add(args[i]);

                _options.put(opt, val);
            }
            else
            {
                endargs.add(args[i]);
            }
        }

        _badopts = (String[])badopts.toArray(new String[badopts.size()]);
        _args = (String[])endargs.toArray(new String[endargs.size()]);
    }

