    private static File outputFileFor(File file, File baseDir, File outdir)
    {
        URI base = baseDir.getAbsoluteFile().toURI();
        URI abs = file.getAbsoluteFile().toURI();
        URI rel = base.relativize(abs);
        if (rel.isAbsolute())
        {
            System.out.println("Cannot relativize " + file);
            return null;
        }

        URI outbase = outdir.toURI();
        URI out = CodeGenUtil.resolve(outbase, rel);
        return new File(out);
    }

