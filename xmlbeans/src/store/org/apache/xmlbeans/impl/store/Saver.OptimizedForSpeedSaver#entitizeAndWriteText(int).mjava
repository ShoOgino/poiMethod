        private void entitizeAndWriteText(int bufLimit)
        {
            int index = 0;
            for (int i = 0; i < bufLimit; i++)
            {
                char c = _buf[i];
                switch(c)
                {
                case '<':
                    emit(_buf, index, i-index);
                    emit("&lt;");
                    index = i+1;
                    break;
                case '&':
                    emit(_buf, index, i-index);
                    emit("&amp;");
                    index = i+1;
                    break;
                }
            }
            emit(_buf, index, bufLimit-index);
        }

