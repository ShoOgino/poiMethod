        private void computeAncestorNamespaces ( Cur c )
        {
            _ancestorNamespaces = new ArrayList();

            while ( c.toParentRaw() )
            {
                if (c.toFirstAttr())
                {
                    do
                    {
                        if (c.isXmlns())
                        {
                            String prefix = c.getXmlnsPrefix();
                            String uri = c.getXmlnsUri();

                            // Don't let xmlns:foo="" get used

                            if (uri.length() > 0 || prefix.length() == 0)
                            {
                                _ancestorNamespaces.add( c.getXmlnsPrefix() );
                                _ancestorNamespaces.add( c.getXmlnsUri() );
                            }
                        }
                    }
                    while ( c.toNextAttr() );

                    c.toParent();
                }
            }
        }

