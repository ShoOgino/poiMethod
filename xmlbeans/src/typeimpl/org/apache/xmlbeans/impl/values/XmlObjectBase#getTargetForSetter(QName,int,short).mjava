    private XmlObjectBase getTargetForSetter(QName propName, int index, short kindSetterHelper)
    {
        switch (kindSetterHelper)
        {
            case KIND_SETTERHELPER_SINGLETON:
            {
                check_orphaned();
                XmlObjectBase target = null;
                target = (XmlObjectBase)get_store().find_element_user(propName, index);
                if (target == null)
                {
                    target = (XmlObjectBase)get_store().add_element_user(propName);
                }

                if (target.isImmutable())
                    throw new IllegalStateException("Cannot set the value of an immutable XmlObject");

                return target;
            }

            case KIND_SETTERHELPER_ARRAYITEM:
            {
                check_orphaned();
                XmlObjectBase target = null;
                target = (XmlObjectBase)get_store().find_element_user(propName, index);
                if (target == null)
                {
                    throw new IndexOutOfBoundsException();
                }

                if (target.isImmutable())
                    throw new IllegalStateException("Cannot set the value of an immutable XmlObject");

                return target;
            }

            default:
                throw new IllegalArgumentException("Unknown kindSetterHelper: " + kindSetterHelper);
        }
    }

