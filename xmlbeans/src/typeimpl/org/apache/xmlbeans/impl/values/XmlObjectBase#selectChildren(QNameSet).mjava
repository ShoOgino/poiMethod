    /**
     * Selects the contents of the children elements that are contained in the elementNameSet.
     */
    public XmlObject[] selectChildren(QNameSet elementNameSet)
    {
        if (elementNameSet==null)
            throw new IllegalArgumentException();

        XmlCursor xc = this.newCursor();
        try
        {
            if (!xc.isContainer())
                return EMPTY_RESULT;

            List result = new ArrayList();

            if (xc.toFirstChild())
            {
                // look for elements
                do
                {
                    assert xc.isContainer();
                    if (elementNameSet.contains(xc.getName()))
                    {
                        result.add(xc.getObject());
                    }
                }
                while (xc.toNextSibling());
            }
            if (result.size() == 0)
                return EMPTY_RESULT;
            else
                return (XmlObject[]) result.toArray(EMPTY_RESULT);
        }
        finally
        {
            xc.dispose();
        }
    }

