    SchemaTypeImpl findGlobalType(QName name, String chameleonNamespace, String sourceNamespace)
    {
        name = compatName(name, chameleonNamespace);
        SchemaTypeImpl result = (SchemaTypeImpl)_globalTypes.get(name);
        boolean foundOnLoader = false;
        if (result == null)
        {
            result = (SchemaTypeImpl)_importingLoader.findType(name);
            foundOnLoader = result != null;
        }
        if (!foundOnLoader && sourceNamespace != null)
            registerDependency(sourceNamespace, name.getNamespaceURI());
        return result;
    }

