    public static XmlError errorForEvent(String code, Object[] args, int severity, Event event)
    {
        XmlCursor loc = event.getLocationAsCursor();
        XmlError error;
        if (loc!=null)
            error = XmlError.forCursor(code, args, severity, loc);
        else
        {
            Location location = event.getLocation();
            if (location!=null)
            {
                error = XmlError.forLocation(code, args, severity,
                    location.getSystemId(), location.getLineNumber(),
                    location.getColumnNumber(), location.getCharacterOffset());
            }
            else
            {
                error = XmlError.forMessage(code, args, severity);
            }
        }
        return error;
    }

