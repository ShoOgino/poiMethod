        void addFields(XmlObjectList fields, Event e) 
        {
            if (_constraint.getConstraintCategory() == SchemaIdentityConstraint.CC_KEYREF)
                _values.add(fields);
            else if (_values.contains(fields))
            {
                if (_constraint.getConstraintCategory() == SchemaIdentityConstraint.CC_UNIQUE)
                    emitError(e, XmlErrorCodes.IDENTITY_CONSTRAINT_VALID$DUPLICATE_UNIQUE,
                        new Object[] { fields, QNameHelper.pretty(_constraint.getName()) });
                else
                    emitError(e, XmlErrorCodes.IDENTITY_CONSTRAINT_VALID$DUPLICATE_KEY,
                        new Object[] { fields, QNameHelper.pretty(_constraint.getName()) });
            }
            else
                _values.add(fields);
        }

