        public synchronized void write(int b) throws IOException
        {
            if (writepos + 1 > buf.length)
            {
                shift(1);
            }
            buf[writepos] = (byte)b;
            writepos += 1;
        }

