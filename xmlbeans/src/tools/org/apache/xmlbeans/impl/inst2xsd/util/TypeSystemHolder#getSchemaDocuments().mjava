    public SchemaDocument[] getSchemaDocuments()
    {
        // recompute everything, should cache it and track changes
        Map nsToSchemaDocs = new LinkedHashMap();

        for (Iterator iterator = _globalElements.keySet().iterator(); iterator.hasNext();)
        {
            QName globalElemName = (QName) iterator.next();
            String tns = globalElemName.getNamespaceURI();
            SchemaDocument schDoc = getSchemaDocumentForTNS(nsToSchemaDocs, tns);

            fillUpGlobalElement((Element)_globalElements.get(globalElemName), schDoc, tns);
        }

        for (Iterator iterator = _globalAttributes.keySet().iterator(); iterator.hasNext();)
        {
            QName globalAttName = (QName) iterator.next();
            String tns = globalAttName.getNamespaceURI();
            SchemaDocument schDoc = getSchemaDocumentForTNS(nsToSchemaDocs, tns);

            fillUpGlobalAttribute((Attribute)_globalAttributes.get(globalAttName), schDoc, tns);
        }

        for (Iterator iterator = _globalTypes.keySet().iterator(); iterator.hasNext();)
        {
            QName globalTypeName = (QName) iterator.next();
            String tns = globalTypeName.getNamespaceURI();
            SchemaDocument schDoc = getSchemaDocumentForTNS(nsToSchemaDocs, tns);

            fillUpGlobalType((Type)_globalTypes.get(globalTypeName), schDoc, tns);
        }

        Collection schDocColl = nsToSchemaDocs.values();
        return (SchemaDocument[])schDocColl.toArray(new SchemaDocument[schDocColl.size()]);
    }

