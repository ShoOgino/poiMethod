    @Test
    public void testDumpToPrintStream() throws IOException {
        byte[] testArray = new byte[ 256 ];

        for (int j = 0; j < 256; j++)
        {
            testArray[ j ] = ( byte ) j;
        }

        InputStream in = new ByteArrayInputStream(testArray);
        try {
            ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
            PrintStream out = new PrintStream(byteOut);
            try {
                HexDump.dump(in, out, 0, 256);
            } finally {
                out.close();
            }
            
            String str = new String(byteOut.toByteArray());
            assertTrue("Had: \n" + str, 
                    str.contains("0123456789:;<=>?"));
        } finally {
            in.close();
        }
        
        in = new ByteArrayInputStream(testArray);
        try {
            ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
            PrintStream out = new PrintStream(byteOut);
            try {
                // test with more than we have
                HexDump.dump(in, out, 0, 1000);
            } finally {
                out.close();
            }
            
            String str = new String(byteOut.toByteArray());
            assertTrue("Had: \n" + str, 
                    str.contains("0123456789:;<=>?"));
        } finally {
            in.close();
        }        

        in = new ByteArrayInputStream(testArray);
        try {
            ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
            PrintStream out = new PrintStream(byteOut);
            try {
                // test with -1
                HexDump.dump(in, out, 0, -1);
            } finally {
                out.close();
            }
            
            String str = new String(byteOut.toByteArray());
            assertTrue("Had: \n" + str, 
                    str.contains("0123456789:;<=>?"));
        } finally {
            in.close();
        }
        
        in = new ByteArrayInputStream(testArray);
        try {
            ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
            PrintStream out = new PrintStream(byteOut);
            try {
                HexDump.dump(in, out, 1, 235);
            } finally {
                out.close();
            }
            
            String str = new String(byteOut.toByteArray());
            assertTrue("Line contents should be moved by one now, but Had: \n" + str, 
                    str.contains("123456789:;<=>?@"));
        } finally {
            in.close();
        }
    }

