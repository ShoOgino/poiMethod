    @Test
    public void testDumpToPrintStream() throws IOException {
        byte[] testArray = testArray();
        ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
        PrintStream out = new PrintStream(byteOut,true,LocaleUtil.CHARSET_1252.name());
        ByteArrayInputStream byteIn = new ByteArrayInputStream(testArray);
        byteIn.mark(256);
        String str;

        byteIn.reset();
        byteOut.reset();
        HexDump.dump(byteIn, out, 0, 256);
        str = new String(byteOut.toByteArray(), LocaleUtil.CHARSET_1252);
        assertTrue("Had: \n" + str, str.contains("0123456789:;<=>?"));

        // test with more than we have
        byteIn.reset();
        byteOut.reset();
        HexDump.dump(byteIn, out, 0, 1000);
        str = new String(byteOut.toByteArray(), LocaleUtil.CHARSET_1252);
        assertTrue("Had: \n" + str, str.contains("0123456789:;<=>?"));

        // test with -1
        byteIn.reset();
        byteOut.reset();
        HexDump.dump(byteIn, out, 0, -1);
        str = new String(byteOut.toByteArray(), LocaleUtil.CHARSET_1252);
        assertTrue("Had: \n" + str, str.contains("0123456789:;<=>?"));

        byteIn.reset();
        byteOut.reset();
        HexDump.dump(byteIn, out, 1, 235);
        str = new String(byteOut.toByteArray(), LocaleUtil.CHARSET_1252);
        assertTrue("Line contents should be moved by one now, but Had: \n" + str,
                    str.contains("123456789:;<=>?@"));

        byteIn.close();
        byteOut.close();
    }

