    @Test
    public void testShortFile() throws IOException {
        // having a file shorter than 8 bytes previously caused an exception
        byte[] data = new byte[] { -1, -40, -1, -32, 0 };

        File file = TempFile.createTempFile("TestFileMagic", ".bin");
        try {
            try (FileOutputStream fos = new FileOutputStream(file)) {
                fos.write(data);
            }

            assertEquals(FileMagic.UNKNOWN, FileMagic.valueOf(file));
        } finally {
            assertTrue(file.delete());
        }
    }

