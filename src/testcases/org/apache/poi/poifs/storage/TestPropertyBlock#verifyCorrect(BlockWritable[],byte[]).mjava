    private static void verifyCorrect(BlockWritable[] blocks, byte[] testblock) {
        ByteArrayOutputStream stream = new ByteArrayOutputStream(512
                                           * blocks.length);

        for (int j = 0; j < blocks.length; j++) {
            try {
				blocks[ j ].writeBlocks(stream);
			} catch (IOException e) {
				throw new RuntimeException(e);
			}
        }
        byte[] output = stream.toByteArray();

        assertEquals(testblock.length, output.length);
        for (int j = 0; j < testblock.length; j++)
        {
            assertEquals("mismatch at offset " + j, testblock[ j ],
                         output[ j ]);
        }
    }

