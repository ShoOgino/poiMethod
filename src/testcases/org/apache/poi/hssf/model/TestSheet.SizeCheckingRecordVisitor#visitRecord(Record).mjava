        public void visitRecord(Record r) {

            int estimatedSize=r.getRecordSize();
            byte[] buf = new byte[estimatedSize];
            int serializedSize = r.serialize(0, buf);
            if (estimatedSize != serializedSize) {
                throw new AssertionFailedError("serialized size mismatch for record ("
                        + r.getClass().getName() + ")");
            }
            _totalSize += estimatedSize;
        }

