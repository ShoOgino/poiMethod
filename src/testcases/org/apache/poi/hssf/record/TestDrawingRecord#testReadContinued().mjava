    /**
     * Check that RecordFactoryInputStream properly handles continued DrawingRecords
     * See Bugzilla #47548
     */
    public void testReadContinued() throws IOException {

        //simulate a continues drawing record
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        //main part
        DrawingRecord dg = new DrawingRecord();
        byte[] data1 = new byte[8224];
        Arrays.fill(data1, (byte)1);
        dg.setData(data1);
        out.write(dg.serialize());

        //continued part
        byte[] data2 = new byte[4048];
        Arrays.fill(data2, (byte)2);
        ContinueRecord cn = new ContinueRecord(data2);
        out.write(cn.serialize());

        List<Record> rec = RecordFactory.createRecords(new ByteArrayInputStream(out.toByteArray()));
        assertEquals(1, rec.size());
        assertTrue(rec.get(0) instanceof DrawingRecord);

        //DrawingRecord.getData() should return concatenated data1 and data2
        byte[] tmp = new byte[data1.length + data2.length];
        System.arraycopy(data1, 0, tmp, 0, data1.length);
        System.arraycopy(data2, 0, tmp, data1.length, data2.length);

        DrawingRecord dg2 = (DrawingRecord)rec.get(0);
        assertEquals(data1.length + data2.length, dg2.getData().length);
        assertTrue(Arrays.equals(tmp, dg2.getData()));

    }

