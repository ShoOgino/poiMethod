    public static X509CRL generateCrl(X509Certificate issuer,
            PrivateKey issuerPrivateKey) throws InvalidKeyException,
            CRLException, IllegalStateException, NoSuchAlgorithmException,
            SignatureException, InvocationTargetException, IllegalAccessException,
            InstantiationException, NoSuchMethodException, ClassNotFoundException, NoSuchFieldException {
        X509V2CRLGeneratorIf crlGenerator = newProxy(X509V2CRLGeneratorIf.class);
        crlGenerator.setIssuerDN(issuer.getSubjectX500Principal());
        Date now = new Date();
        crlGenerator.setThisUpdate(now);
        crlGenerator.setNextUpdate(new Date(now.getTime() + 100000));
        crlGenerator.setSignatureAlgorithm("SHA1withRSA");

        X509ExtensionsIf X509Extensions = newProxy(X509ExtensionsIf.class);
        CRLNumberIf crlNumber = newProxy(CRLNumberIf.class, new BigInteger("1234"));
        
        crlGenerator.addExtension(X509Extensions.CRLNumber(), false, crlNumber);
        X509CRL x509Crl = crlGenerator.generate(issuerPrivateKey);
        return x509Crl;
    }

