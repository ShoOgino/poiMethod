    private Node getComplexTypeNodeFromSchemaChildren(Node xmlSchema, Node complexTypeNode,
            String complexTypeName) {
        NodeList  complexTypeList  = xmlSchema.getChildNodes();
        for(int i=0; i< complexTypeList.getLength();i++) {
            Node node = complexTypeList.item(i);
            if ( node instanceof Element) {
                if ("complexType".equals(node.getLocalName())) {
                    Node nameAttribute = getNameOrRefElement(node);
                    if (nameAttribute.getNodeValue().equals(complexTypeName)) {

                        NodeList complexTypeChildList  =node.getChildNodes();
                        for(int j=0; j<complexTypeChildList.getLength();j++) {
                            Node sequence = complexTypeChildList.item(j);

                            if ( sequence instanceof Element) {
                                final String localName = sequence.getLocalName();
                                if ("sequence".equals(localName) || "all".equals(localName)) {
                                    complexTypeNode = sequence;
                                    break;
                                }
                            }
                        }
                        if (complexTypeNode!=null) {
                            break;
                        }

                    }
                }
            }
        }
        return complexTypeNode;
    }

