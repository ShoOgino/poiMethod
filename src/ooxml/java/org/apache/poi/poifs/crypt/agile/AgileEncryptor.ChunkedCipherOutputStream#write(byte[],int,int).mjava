        public void write(byte[] b, int off, int len)
        throws IOException {
            if (len == 0) return;
            
            if (len < 0 || b.length < off+len) {
                throw new IOException("not enough bytes in your input buffer");
            }
            
            while (len > 0) {
                int posInChunk = (int)(_pos & 0xfff);
                int nextLen = Math.min(4096-posInChunk, len);
                System.arraycopy(b, off, _chunk, posInChunk, nextLen);
                _pos += nextLen;
                off += nextLen;
                len -= nextLen;
                if ((_pos & 0xfff) == 0) {
                    writeChunk();
                }
            }
        }

