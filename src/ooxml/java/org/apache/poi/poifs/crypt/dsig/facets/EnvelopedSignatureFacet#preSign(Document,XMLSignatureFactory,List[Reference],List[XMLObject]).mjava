    @Override
    public void preSign(Document document
        , XMLSignatureFactory signatureFactory
        , List<Reference> references
        , List<XMLObject> objects)
    throws NoSuchAlgorithmException, InvalidAlgorithmParameterException {
        DigestMethod digestMethod = signatureFactory.newDigestMethod
            (signatureConfig.getDigestMethodUri(), null);

        List<Transform> transforms = new ArrayList<Transform>();
        Transform envelopedTransform = signatureFactory.newTransform
            (CanonicalizationMethod.ENVELOPED, (TransformParameterSpec) null);
        transforms.add(envelopedTransform);
        Transform exclusiveTransform = signatureFactory.newTransform
            (CanonicalizationMethod.EXCLUSIVE, (TransformParameterSpec) null);
        transforms.add(exclusiveTransform);

        Reference reference = signatureFactory.newReference("", digestMethod,
                transforms, null, null);

        references.add(reference);
    }

