    public void initialize(EncryptionInfo info, DocumentInputStream dis) throws IOException {
        this.info = info;
        
        StringBuilder builder = new StringBuilder();
        byte[] xmlDescriptor = new byte[dis.available()];
        dis.read(xmlDescriptor);
        for (byte b : xmlDescriptor)
            builder.append((char)b);
        String descriptor = builder.toString();
        header = new AgileEncryptionHeader(descriptor);
        verifier = new AgileEncryptionVerifier(descriptor);
        if (info.getVersionMajor() == 4 && info.getVersionMinor() == 4) {
            decryptor = new AgileDecryptor(this);
        }
    }

