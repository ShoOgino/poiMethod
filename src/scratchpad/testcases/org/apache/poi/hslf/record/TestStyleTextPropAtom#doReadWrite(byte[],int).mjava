    protected void doReadWrite(byte[] data, int textlen) throws Exception {
        StyleTextPropAtom stpb = new StyleTextPropAtom(data, 0,data.length);
        if(textlen != -1) stpb.setParentTextSize(textlen);

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        stpb.writeOut(out);
        byte[] bytes = out.toByteArray();

        assertEquals(data.length, bytes.length);
        try {
            assertTrue(Arrays.equals(data, bytes));
        } catch (Throwable e){
            //print hex dump if failed
            assertEquals(HexDump.toHex(data), HexDump.toHex(bytes));
        }
    }

