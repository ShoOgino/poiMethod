	/**
	 * Creates the appropriate chunk at the given location.
	 * @param data
	 * @param offset
	 * @return
	 */
	public Chunk createChunk(byte[] data, int offset) {
		// Create the header
		ChunkHeader header = 
			ChunkHeader.createChunkHeader(version, data, offset);
		
		// Create the trailer and separator, if required
		ChunkTrailer trailer = null;
		ChunkSeparator separator = null;
		if(header.hasTrailer()) {
			trailer = new ChunkTrailer(
					data, header.getLength() + header.getSizeInBytes());
			if(header.hasSeparator()) {
				separator = new ChunkSeparator(
					data, header.getLength() + header.getSizeInBytes() + 8);
			}
		}
		
		// Now, create the chunk
		byte[] contents = new byte[header.getLength()];
		System.arraycopy(data, offset+header.getSizeInBytes(), contents, 0, contents.length);
		Chunk chunk = new Chunk(header, trailer, separator, contents);
		
		// Feed in the stuff from  chunks_parse_cmds.tbl
		// TODO
		
		// All done
		return chunk;
	}

