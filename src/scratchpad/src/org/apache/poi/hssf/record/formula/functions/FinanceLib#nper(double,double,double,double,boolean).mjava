    /**
     * 
     * @param r
     * @param n
     * @param p
     * @param f
     * @param t
     * @return
     */
    public static int nper(double r, double y, double p, double f, boolean t) {
        double r1 = r + 1;
        double ryr = (t ? r1 : 1) * y / r;
        double a1 = ((ryr-f) < 0) ? Math.log(f-ryr) : Math.log(ryr-f);
        double a2 = ((ryr-f) < 0) ? Math.log(-p-ryr) : Math.log(p+ryr);
        double a3 = Math.log(r1);
        double dval = ( a1 - a2 ) / a3;
        
        return (int) Math.round(dval);
    }

