    /**
     * calculates the Net Present Value of a principal amount
     * given the discount rate and a sequence of cash flows 
     * (supplied as an array). If the amounts are income the value should 
     * be positive, else if they are payments and not income, the 
     * value should be negative.
     * @param r
     * @param cfs cashflow amounts
     * @return
     */
    public static double npv(double r, double[] cfs) {
        double npv = 0;
        double r1 = r + 1;
        double trate = r1;
        for (int i=0, iSize=cfs.length; i<iSize; i++) {
            npv += cfs[i] / trate;
            trate *= r1;
        }
        return npv;
    }

