    public BufferedImage getImage() {
        if (imageData == null) {
            throw new RecordFormatException("bitmap not initialized ... need to call init() before");
        }

        // create the image data and leave the parsing to the ImageIO api
        byte buf[] = new byte[BMP_HEADER_SIZE+imageData.length];

        // https://en.wikipedia.org/wiki/BMP_file_format #  Bitmap file header
        buf[0] = (byte)'B';
        buf[1] = (byte)'M';
        // the full size of the bmp
        LittleEndian.putInt(buf, 2, (int)(BMP_HEADER_SIZE + introSize + headerImageSize));
        // the next 4 bytes are unused
        LittleEndian.putInt(buf, 6, 0);
        // start of image = BMP header length + dib header length + color tables length
        LittleEndian.putInt(buf, 10, BMP_HEADER_SIZE + introSize);
        
        System.arraycopy(imageData, 0, buf, BMP_HEADER_SIZE, imageData.length);
        
        try {
            return ImageIO.read(new ByteArrayInputStream(buf));
        } catch (IOException e) {
            // ... shouldn't happen
            throw new RecordFormatException("invalid bitmap data", e);
        }
    }

