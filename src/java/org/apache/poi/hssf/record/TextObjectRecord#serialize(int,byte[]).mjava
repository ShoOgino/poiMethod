	public int serialize(int offset, byte[] data) {

		int expectedTotalSize = getRecordSize();
		int totalSize = serializeTXORecord(offset, data);
		
		if (_text.getString().length() > 0) {
			totalSize += serializeTrailingRecords(offset+totalSize, data);
		} 
		
		if (totalSize != expectedTotalSize)
			throw new RecordFormatException(totalSize
					+ " bytes written but getRecordSize() reports " + expectedTotalSize);
		return totalSize;
	}

