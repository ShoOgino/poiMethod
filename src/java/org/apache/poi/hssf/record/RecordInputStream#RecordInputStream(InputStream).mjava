	public RecordInputStream(InputStream in) throws RecordFormatException {
		_in = in;
		if (in instanceof LittleEndianInput) {
			// accessing directly is an optimisation
			_le = (LittleEndianInput) in;
		} else {
			// less optimal, but should work OK just the same. Often occurs in junit tests.
			_le = new LittleEndianInputStream(in);
		}
		try {
		      if (_in.available() < LittleEndian.SHORT_SIZE) {
		          nextSid = INVALID_SID_VALUE;
		      } else {
		    	  nextSid = LittleEndian.readShort(in);
		      }
		} catch (IOException ex) {
			throw new RecordFormatException("Error reading bytes", ex);
		}
		_currentDataLength = DATA_LEN_NEEDS_TO_BE_READ;
		autoContinue = true;
	}

