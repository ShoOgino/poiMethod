    public static Ptg[] parse(String formula, int offset) {
        List ptgs = new ArrayList();
        
        while (offset < formula.length()) {
            Ptg ptg = getNextToken(formula,offset);
            offset += ptg.getStringLength();
            ptgs.add(ptg);
        }
        
        Ptg[] retval = new Ptg[ptgs.size()];
        retval = (Ptg[])ptgs.toArray(retval);
        return retval;
    }

