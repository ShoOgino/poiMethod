    public int serialize(int offset, byte [] data) {
        // TODO - junit
        LittleEndian.putShort(data, 0 + offset, sid);
        LittleEndian.putShort(data, 2 + offset, (short)(getRecordSize()-4));
        LittleEndian.putShort(data, 4 + offset, getReadOnly());
        LittleEndian.putShort(data, 6 + offset, getPassword());
        LittleEndian.putShort(data, 8 + offset, getUsernameLength());
        if(getUsernameLength() > 0) {
            LittleEndian.putByte(data, 10 + offset, field_3_username_unicode_options);
            StringUtil.putCompressedUnicode( getUsername(), data, 11 + offset );
        }
        return getRecordSize();
    }

