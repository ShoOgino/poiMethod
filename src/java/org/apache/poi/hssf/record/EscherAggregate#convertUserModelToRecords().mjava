    private void convertUserModelToRecords()
    {
        if ( patriarch != null )
        {
            shapeToObj.clear();
            tailRec.clear();
            clearEscherRecords();
            if ( patriarch.getChildren().size() != 0 )
            {
                convertPatriarch( patriarch );
                EscherContainerRecord dgContainer = (EscherContainerRecord) getEscherRecord( 0 );
                EscherContainerRecord spgrContainer = null;
                for ( int i = 0; i < dgContainer.getChildRecords().size(); i++ )
                    if ( dgContainer.getChild( i ).getRecordId() == EscherContainerRecord.SPGR_CONTAINER )
                        spgrContainer = (EscherContainerRecord) dgContainer.getChild( i );
                convertShapes( patriarch, spgrContainer, shapeToObj );

                patriarch = null;
            }
        }
    }

