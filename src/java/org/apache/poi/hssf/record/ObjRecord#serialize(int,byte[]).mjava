	public int serialize(int offset, byte[] data) {
		int dataSize = getDataSize();

		LittleEndian.putUShort(data, 0 + offset, sid);
		LittleEndian.putUShort(data, 2 + offset, dataSize);

		byte[] subRecordBytes;
		if (_uninterpretedData == null) {
			ByteArrayOutputStream baos = new ByteArrayOutputStream(dataSize);
			LittleEndianOutput leo = new LittleEndianOutputStream(baos);

			for (int i = 0; i < subrecords.size(); i++) {
				SubRecord record = (SubRecord) subrecords.get(i);
				record.serialize(leo);
			}
			// padding
			while (baos.size() < dataSize) {
				baos.write(0);
			}
			subRecordBytes = baos.toByteArray();
		} else {
			subRecordBytes = _uninterpretedData;
		}
		System.arraycopy(subRecordBytes, 0, data, offset + 4, dataSize);
		return 4 + dataSize;
	}

