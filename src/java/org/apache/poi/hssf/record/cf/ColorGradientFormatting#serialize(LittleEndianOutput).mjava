    public void serialize(LittleEndianOutput out) {
        out.writeShort(0);
        out.writeByte(0);
        out.writeByte(thresholds.length);
        out.writeByte(thresholds.length);
        out.writeByte(options);
        
        double step = 1d / (thresholds.length-1);
        for (int i=0; i<thresholds.length; i++) {
            Threshold t = thresholds[i];
            t.serialize(out);
            out.writeDouble(step*i);
        }
        
        out.write(colors);
    }

