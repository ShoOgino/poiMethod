    @Override
    public int read(byte[] buff, int off, int len) {
        int bytesRead = 0;
        for (int i = off; i < off+len; i++) {
            int b = read();
            if (b == -1) {
                if (bytesRead == 0) {
                    return -1;
                } else {
                    return bytesRead;
                }
            }
            bytesRead++;
            buff[i] = (byte)b;
        }
        return bytesRead;
    }

